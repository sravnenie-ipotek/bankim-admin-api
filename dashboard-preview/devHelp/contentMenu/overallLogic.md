# –ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä ‚Äî –õ–æ–≥–∏–∫–∞ –º–µ–Ω—é

> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-01-20  
> –ê–≤—Ç–æ—Ä: AI assistant (o3)

## 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ ¬´–ú–µ–Ω—é¬ª
–†–∞–∑–¥–µ–ª ¬´–ú–µ–Ω—é¬ª –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä—É/–∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥–ø—É–Ω–∫—Ç—ã —Å–∞–π–¥-–±–∞—Ä–∞ (Left Side Navigation) –Ω–∞ —Ç—Ä—ë—Ö —è–∑—ã–∫–∞—Ö ‚Äî RU / HE / EN.  
–§–∏—á–∏ —ç–∫—Ä–∞–Ω–∞:
* –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é –∏ –∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤.  
* –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á—É, ru/he/en –∑–Ω–∞—á–µ–Ω–∏—è–º.  
* Inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ —Å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤.  
* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è.  
* –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é ETag, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–µ–∫.

> –°—Å—ã–ª–∫–∞ –Ω–∞ Confluence: [3. –ö–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞. –°—Ç—Ä. 3](https://bankimonline.atlassian.net/wiki/spaces/Bankim/pages/138903604)  
> Figma –º–∞–∫–µ—Ç ¬´–ö–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞. –ú–µ–Ω—é¬ª ‚Äî node-id **79-78410 / 79-78089**.

---

## 2. –ù–∞–≤–∏–≥–∞—Ü–∏—è
| –£—Ä–æ–≤–µ–Ω—å | ID –≤ –∫–æ–¥–µ | –õ–µ–π–±–ª | –ü—É—Ç—å (Router) |
|---------|-----------|-------|----------------|
| Parent  | `content-management` | –ö–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞ | `/content-management` |
| Sub 1   | `content-main`        | –ì–ª–∞–≤–Ω–∞—è       | `/content/main` |
| **Sub 2** | `content-menu`        | **–ú–µ–Ω—é**       | `/content/menu` |
| Sub 3   | `content-mortgage`    | –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–ø–æ—Ç–µ–∫—É | `/content/mortgage` |
| ‚Ä¶       | ‚Ä¶                     | ‚Ä¶             | ‚Ä¶ |

### 2.1 –ö–ª–∏–∫-—Ñ–ª–æ—É
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–∞–π–¥-–±–∞—Ä.  
2. –ñ–º—ë—Ç ¬´–ö–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞¬ª ‚Üí –¥—Ä–æ–ø-–¥–∞—É–Ω —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è.  
3. –ñ–º—ë—Ç –Ω–∞ ¬´–ú–µ–Ω—é¬ª:  
   * `SharedMenu` –≤—ã–∑—ã–≤–∞–µ—Ç `handleSubItemClick('content-menu', '–ú–µ–Ω—é')`.  
   * `NavigationContext.setCurrentSubmenu` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–µ–µ –ø–æ–¥-–º–µ–Ω—é.  
   * `AdminLayout` —á–µ—Ä–µ–∑ `handleMenuItemClick` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç `window.location.href` ‚Üí `/content/menu`.  
4. React-router —Ä–µ–Ω–¥–µ—Ä–∏—Ç:<br>`<AdminLayout activeMenuItem="content-menu"><ContentMenu/></AdminLayout>`.

---

## 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ContentMenu`
–§–∞–π–ª: `src/pages/ContentMenu/ContentMenu.tsx`

| –≠—Ç–∞–ø | –î–µ—Ç–∞–ª–∏ |
|------|--------|
| Fetch | `useEffect` ‚Üí mock data based on Figma design (12 menu items: 15.1 through 20–ê.1). |
| State | `menuData.menu_items: MenuTranslation[]` (id, content_key, page_name, action_count, translations, last_modified‚Ä¶). |
| UI    | Table with columns: *–ù–ê–ó–í–ê–ù–ò–ï –°–¢–†–ê–ù–ò–¶–´*, *–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–∏*, *–ë—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è*, *Actions* (View/Edit/Delete icons). |
| Search| `searchQuery` filters by page_name, content_key, and any language translation. |
| Pagination | Shows 20 items per page with "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1-20 –∏–∑ X" and page navigation controls. |
| Actions | View (üëÅ), Edit (‚úèÔ∏è), Delete (üóëÔ∏è) buttons - currently console.log placeholders. |

### 3.1 API —Å–ª–æ–π (`src/services/api.ts`)
```ts
// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–µ–Ω—é
getMenuTranslations(): Promise<ApiResponse<any>> {
  return this.requestWithCache('/api/content/menu/translations');
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞
updateMenuTranslation(id, lang, value);
```

### 3.2 –†–∞–∑—Ä–µ—à–µ–Ω–∏—è
* –ü—Ä–æ—Å–º–æ—Ç—Ä (`read/content-management`) ‚Äî —É–≤–∏–¥–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É.  
* –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (`write/content-management`) ‚Äî –¥–æ—Å—Ç—É–ø –∫ ‚úèÔ∏è, ‚úì, ‚úï, üóëÔ∏è.

---

## 4. –¢–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è / TODO
1. **Real API Integration**: Replace mock data with actual `getMenuTranslations()` API call.  
2. **Edit Mode**: Implement inline editing for menu translations (RU/HE/EN).  
3. **Delete Confirmation**: Add modal for delete action with proper API call.  
4. **View Action**: Open site preview in new tab using content_key link.  
5. **Icon Assets**: Replace placeholder icon paths with actual SVG assets.  
6. **–î—Ä–∏–ª–ª-–¥–∞—É–Ω –ø–æ –ø—É–Ω–∫—Ç—É –º–µ–Ω—é**: –º–µ—Ç–æ–¥ `getMenuContent(menuItem, lang)` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω; –Ω—É–∂–Ω–æ —ç–∫—Ä–∞–Ω `/content/menu/:menuItem`.

---

## 5. –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (Mermaid)
```mermaid
flowchart TD
    Sidebar[SharedMenu] -->|click content-menu| Router{{/content/menu}}
    Router --> ContentMenu
    ContentMenu -->|Mock Data| Display[Table Display]
    ContentMenu -->|Search Filter| FilteredItems[Filtered Results]
    ContentMenu -->|Pagination| PaginatedView[Paginated View]
    Display --> Actions{Action Buttons}
    Actions -->|View| ViewAction[Open Preview]
    Actions -->|Edit| EditAction[Inline Edit Mode]
    Actions -->|Delete| DeleteAction[Confirmation Modal]
```

---

## 6. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Confluence
| ‚Ññ –≤ Confluence | –≠–∫—Ä–∞–Ω | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------------|-------|--------|-------------|
| 3 (–°—Ç—Ä. 3) | ¬´–ö–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞. –ú–µ–Ω—é¬ª | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –¥–µ–π—Å—Ç–≤–∏–µ–º ¬´–ú–µ–Ω—é¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ Figma. |
| 4.1 / 4.2 | Edit Dropdown / Text | ‚¨Ö —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–∏ —ç–∫—Ä–∞–Ω—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã ¬´–ú–µ–Ω—é¬ª –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω—ã. |
| ‚Ä¶ | ‚Ä¶ | ‚Ä¶ |

---

## 7. Progress Tracking

### ‚úÖ **Completed (Done)**
- [x] **Page Structure**: Main title "–ú–µ–Ω—é", section title "–°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü" *(matches Figma text9, text10)*
- [x] **Search Box**: With search icon and placeholder text *(matches Figma row-view8)*
- [x] **Table Layout**: Four-column grid structure *(matches Figma table design)*
- [x] **Table Headers**: "–ù–ê–ó–í–ê–ù–ò–ï –°–¢–†–ê–ù–ò–¶–´", "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–∏", "–ë—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è", Actions *(matches Figma view/view2/view3)*
- [x] **Mock Data**: 12 menu items matching Figma design (15.1 ‚Üí 20–ê.1)
- [x] **Data Display**: Page names, action counts, formatted timestamps *(matches Figma text13/text15/text20)*
- [x] **Action Icons**: View/Edit/Delete buttons with proper styling *(matches Figma image8)*
- [x] **Pagination**: "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç X-Y –∏–∑ Z" with page controls *(matches Figma row-view9/row-view10)*
- [x] **Responsive Design**: Mobile/tablet breakpoints implemented
- [x] **CSS Styling**: Complete rewrite to match Figma design exactly
- [x] **Search Functionality**: Filters by page name, content key, and all translations
- [x] **Navigation Integration**: Proper routing and sidebar highlighting
- [x] **Icon Assets**: Replaced placeholder paths with actual SVG assets from `/src/assets/images/static/icons/`
- [x] **Edit Mode Implementation**: Inline editing for menu translations (RU/HE/EN) with save/cancel
- [x] **Real API Integration**: Switched to `apiService.getMenuTranslations()` with fallback to mock data
- [x] **View Action**: Opens site preview in new tab using `content_key` mapping
- [x] **Delete Confirmation**: Implemented delete with confirmation dialog and state updates
- [x] **Content Sections Implementation**: Created ContentMortgage, ContentMortgageRefi, ContentCredit, ContentCreditRefi, ContentGeneral components
- [x] **Base Component Pattern**: Created reusable ContentListBase component following clientSideDev rules to avoid code duplication
- [x] **Routing Integration**: Added all content section routes to App.tsx with proper AdminLayout and permissions
- [x] **Dark Theme Implementation**: Converted entire design system to dark theme with colors from Figma (#1F2A37, #374151, #60A5FA)
- [x] **Unified Design System**: Removed white/light color scheme and made dark theme the default for all content sections

### üîÑ **In Progress (Needs Work)**
- [x] **Menu Untitled Issue**: Fixed "Untitled" appearing in menu by adding proper mock data with page_name values
- [x] **ContentMain Redesign**: Converted to navigation hub matching Confluence Page 3 specification with card-based layout
- [x] **ContentMenu Table Structure**: Updated to match Figma types.md with proper content type columns (ID, Type, RU, HEB)
- [ ] **Backend API Endpoints**: Need real backend implementation for content sections
  - `GET /api/content/sections/{contentType}` - fetch content by type (mortgage, credit, etc.)
  - `GET /api/content/menu/translations` - fetch menu translations
  - `PUT /api/content-items/{id}/translations/{lang}` - update translations
  - `DELETE /api/content-items/{id}` - delete menu item
- [ ] **State Restoration**: Implement proper rollback on edit cancel
- [ ] **Error Handling**: Better error UI and retry mechanisms

### ‚≠ê **Pending (Not Started)**
- [ ] **Loading States**: Better loading UI during data fetch
- [ ] **Accessibility**: ARIA labels, keyboard navigation, screen reader support
- [ ] **Menu Item Creation**: Add new menu item functionality
- [ ] **Bulk Operations**: Select multiple items for bulk actions
- [ ] **Export/Import**: Menu translations export/import functionality
- [ ] **Advanced Search**: Filters by category, status, date range
- [ ] **Audit Trail**: Track who made what changes when

### üêõ **Known Issues**
- [ ] **Edit Cancel**: Currently doesn't restore original values properly
- [ ] **API Fallback**: Using mock data when real API isn't available
- [ ] **Image Paths**: Action button images may not load correctly in production builds

### üìã **Technical Debt**
- [ ] **Type Safety**: Improve TypeScript interfaces for menu data
- [ ] **Performance**: Implement virtualization for large menu lists
- [ ] **Caching**: Optimize caching strategy for menu translations
- [ ] **Testing**: Add unit and integration tests for menu functionality
- [ ] **Validation**: Add client-side validation for translation inputs

---

**–ò—Ç–æ–≥–æ:** –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–∏–∑–∞–π–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Figma –º–∞–∫–µ—Ç—É. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API.
